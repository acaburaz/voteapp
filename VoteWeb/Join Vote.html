<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="//code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="myPagination.js"></script>

    <script type="text/javascript">
        var getc;
        
        GetChoices();
        
        function GetChoices() {

            getc = $.getJSON("http://voteappnet.azurewebsites.net/Api/vote", function (data) {

                $("#myTable").empty();
                var table;
                var row ;

                for (var i = 0; i < data.length; i++) {
                    //$("#myTable").append("<tr>")
                    //$("#myTable").append("<td>" + data[i].Id + "</td>")

                    //$("#myTable").append("<td>" + "<a href=" + "Vote.html?id=" + data[i].Id + ">" + data[i].Name + "</a>" + "</td>");

                    row = "<tr>" + "<td>" + data[i].Id + "</td>" + "<td>" + data[i].Name +  "</td> </tr>";

                                     
                    //for (var j = 0; j < data[i].Choices[j]; j++) {
                    //    var innerrow = "<td>" + data[i].Choices[j].Text + "</td>";
                    //    row.concat(innerrow);

                    //}

                 //   row.concat("");
                    $("#myTable").append(row);
                    // $("#myTable").append("</tr>");
                }
                $('#myTable').pageMe({ pagerSelector: '#myPager', showPrevNext: true, hidePageNumbers: false, perPage: 4 });
            });
        };
        if (getc.success) {
          
           
        }
        function Search() {
            var searchtext = $("#searchbox").val();
            $.getJSON("http://voteappnet.azurewebsites.net/Api/vote?text="+searchtext, function (data) {

                $("#myTable").empty();

                for (var i = 0; i < data.length; i++) {
                    $("#myTable").append("<tr>")

                    $("#myTable").append("<td>" + data[i].Id + "</td>");

                    $("#myTable").append("<td>" + "<a href=" + "Vote.html?id=" + data[i].Id + ">" + data[i].Name + "</a>" + "</td>");


                    for (var j = 0; j < data[i].Choices.length; j++) {
                        $("#myTable").append("<td>" + data[i].Choices[j].Text + "</td>");


                    }
                    $("#myTable").append("</tr>");
                }

            });
        };
    </script>
    
</head>

<body>
    <div class="panel panel-primary">
        <div class="panel-heading"><center>VoteApp v.1.0</center></div>
    </div>
    <div class="jumbotron">
        <center><p class="lead">Select a Voteroom</p></center>
        <div class="col-sm-offset-4 col-sm-7">
        <form class="form-search">
            <div class="input-append">
                <div class="col-lg-6">
                    <div class="input-group">
                        <input type="text" id="searchbox" placeholder="Search here!" class="form-control input-large">
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="button" onclick="Search();" >Search!</button>
                        </span>
                    </div><!-- /input-group -->
                </div><!-- /.col-lg-6 -->
            </div>
        </form>
        </div>
        <div class="row">
            <div class="col-sm-offset-4 col-sm-4">
                <div class="container">
                    <div class="row">


                        <table class="table ">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Vote title</th>
                                    <th>Voters</th>
                                </tr>
                            </thead>
                            <tbody id="myTable">
                                <tr>
                                    <td>1</td>
                                    <td>auch</td>
                                    <td>rolf</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>auch</td>
                                    <td>rolf</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>auch</td>
                                    <td>rolf</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>auch</td>
                                    <td>rolf</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>auch</td>
                                    <td>rolf</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>auch</td>
                                    <td>rolf</td>
                                </tr>
                            </tbody>

                        </table>

                        <center>
                            <ul class="pagination" id="myPager"></ul>
                        </center>
                    </div>

                    <div class="col-md-12 text-center">
                        <ul class="pagination" id="myPager"></ul>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <!-- /Back -->
                <button type="button" class="btn btn-primary" value=" &lt;-- BACK " onclick="history.go(-1);return false;">Back</button>
            </div>
        </div>
    </div>
    
    

</body>

</html>

